<?xml version="1.0" encoding="ISO-8859-1" standalone="yes"?>

<model name="fire">
	<include file = "../tutorial/fire_tutorial_6.xml"/>
	<global>

		<!-- Pathways parameters -->
		<var type="int" name="number_of_h_pathways" parameter="Number of horizontal pathways:" init="1" min="0" max="10" category="Pathways"/>
		<var type="int" name="number_of_v_pathways" parameter="Number of vertical pathways:" init="2" min="0" max="10" category="Pathways" />
		<var type="float" name="pathways_width" parameter="Width of pathways (in meters):" init="10" min="1" max="20" category="Pathways"/>


	
	<init>
		<create species="pathway" number="number_of_v_pathways">
			<set name="horizontal" value="false"/>
		</create>
		
			
		<create species="pathway" number="number_of_h_pathways">
			<set name="horizontal" value="true"/>
		</create>
	</init>
	
	</global>
	
	<entities>
		<species name="pathway" skills="situated">
			<var type="bool" name="horizontal" />
			<var type="point" name="location" init="{horizontal ? 0 : rnd width,horizontal ? rnd height : 0}"/>
			<init>
				<loop over="list tree" var="the_tree">
					<let name="tree_coord" value="horizontal ? last the_tree.location : first the_tree.location"/>
					<let name="self_coord" value="horizontal ? last location : first location"/>
					<if condition="(tree_coord &lt; (self_coord + (pathways_width / 2))) and (tree_coord &gt; (self_coord - (pathways_width / 2)))">
						<ask target="the_tree">
							<do action="die"/>
						</ask>
					</if>
				</loop>
				<do action="die"/>
			</init>
		</species>	
	</entities>
</model>